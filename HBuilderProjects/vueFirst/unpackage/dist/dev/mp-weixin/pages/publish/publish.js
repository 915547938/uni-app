(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/publish/publish"],{79:
/*!*******************************************************************************************!*\
  !*** D:/Documents/HBuilderProjects/vueFirst/main.js?{"page":"pages%2Fpublish%2Fpublish"} ***!
  \*******************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){n(/*! uni-pages */4),n(/*! @dcloudio/uni-stat */5);e(n(/*! vue */2));function e(t){return t&&t.__esModule?t:{default:t}}t(e(n(/*! ./pages/publish/publish.vue */80)).default)}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).createPage)},80:
/*!************************************************************************!*\
  !*** D:/Documents/HBuilderProjects/vueFirst/pages/publish/publish.vue ***!
  \************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var i=n(/*! ./publish.vue?vue&type=template&id=8b3bba02&scoped=true& */81),s=n(/*! ./publish.vue?vue&type=script&lang=js& */83);for(var u in s)"default"!==u&&function(t){n.d(e,t,function(){return s[t]})}(u);n(/*! ./publish.vue?vue&type=style&index=0&id=8b3bba02&scoped=true&lang=css& */89);var r=n(/*! ./node_modules/vue-loader/lib/runtime/componentNormalizer.js */14),o=Object(r.default)(s.default,i.render,i.staticRenderFns,!1,null,"8b3bba02",null);o.options.__file="D:/Documents/HBuilderProjects/vueFirst/pages/publish/publish.vue",e.default=o.exports},81:
/*!*******************************************************************************************************************!*\
  !*** D:/Documents/HBuilderProjects/vueFirst/pages/publish/publish.vue?vue&type=template&id=8b3bba02&scoped=true& ***!
  \*******************************************************************************************************************/
/*! exports provided: render, staticRenderFns */function(t,e,n){"use strict";n.r(e);var i=n(/*! -!./node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish.vue?vue&type=template&id=8b3bba02&scoped=true& */82);n.d(e,"render",function(){return i.render}),n.d(e,"staticRenderFns",function(){return i.staticRenderFns})},82:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/Documents/HBuilderProjects/vueFirst/pages/publish/publish.vue?vue&type=template&id=8b3bba02&scoped=true& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */function(t,e,n){"use strict";n.r(e),n.d(e,"render",function(){return i}),n.d(e,"staticRenderFns",function(){return s});var i=function(){var t=this.$createElement;this._self._c},s=[];i._withStripped=!0},83:
/*!*************************************************************************************************!*\
  !*** D:/Documents/HBuilderProjects/vueFirst/pages/publish/publish.vue?vue&type=script&lang=js& ***!
  \*************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var i=n(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish.vue?vue&type=script&lang=js& */84),s=n.n(i);for(var u in i)"default"!==u&&function(t){n.d(e,t,function(){return i[t]})}(u);e.default=s.a},84:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/Documents/HBuilderProjects/vueFirst/pages/publish/publish.vue?vue&type=script&lang=js& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=s(n(/*! ./node_modules/@babel/runtime/regenerator */85));s(n(/*! ../../common/image.js */88));function s(t){return t&&t.__esModule?t:{default:t}}function u(t,e,n,i,s,u,r){try{var o=t[u](r),a=o.value}catch(t){return void n(t)}o.done?e(a):Promise.resolve(a).then(i,s)}function r(t){return function(){var e=this,n=arguments;return new Promise(function(i,s){var r=t.apply(e,n);function o(t){u(r,i,s,o,a,"next",t)}function a(t){u(r,i,s,o,a,"throw",t)}o(void 0)})}}var o=[["camera"],["album"],["camera","album"]],a=[["compressed"],["original"],["compressed","original"]],c={data:function(){return{input_content:"",imageList:[],sourceTypeIndex:2,sourceType:["拍照","相册","拍照或相册"],sizeTypeIndex:2,sizeType:["压缩","原图","压缩或原图"],countIndex:8,count:[1,2,3,4,5,6,7,8,9],startX:0,movedX:0,endX:0}},onUnload:function(){this.imageList=[],this.sourceTypeIndex=2,this.sourceType=["拍照","相册","拍照或相册"],this.sizeTypeIndex=2,this.sizeType=["压缩","原图","压缩或原图"],this.countIndex=8},methods:{publish:function(){var e=r(i.default.mark(function e(){var n,s,u,r,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(this.imageList),this.input_content){e.next=4;break}return t.showModal({content:"内容不能为空",showCancel:!1}),e.abrupt("return");case 4:return t.showLoading({title:"发布中"}),e.next=7,this.getLocation();case 7:for(n=e.sent,s=[],u=0,r=this.imageList.length;u<r;u++)o={name:"image-"+u,uri:this.imageList[u]},s.push(o);t.uploadFile({url:"moment/moments",files:s,filePath:"",name:"",formData:{user_id:"1",text:this.input_content,longitude:n.longitude,latitude:n.latitude},success:function(e){t.hideLoading(),t.showToast({icon:"success",title:"发布成功"}),t.navigateBack({delta:1})},fail:function(e){console.log("e: "+JSON.stringify(e)),t.hideLoading(),t.showToast({icon:"none",title:"发布失败,请检查网络"})}});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getLocation:function(){return new Promise(function(e,n){t.getLocation({type:"wgs84",success:function(t){e(t)},fail:function(t){n(t)}})})},close:function(t){this.imageList.splice(t,1)},chooseImage:function(){var e=r(i.default.mark(function e(){var n,s=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(9!==this.imageList.length){e.next=7;break}return e.next=3,this.isFullImg();case 3:if(n=e.sent,console.log("是否继续?",n),n){e.next=7;break}return e.abrupt("return");case 7:t.chooseImage({sourceType:o[this.sourceTypeIndex],sizeType:a[this.sizeTypeIndex],count:this.imageList.length+this.count[this.countIndex]>9?9-this.imageList.length:this.count[this.countIndex],success:function(t){s.imageList=s.imageList.concat(t.tempFilePaths)}});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),isFullImg:function(){var e=this;return new Promise(function(n){t.showModal({content:"已经有9张图片了,是否清空现有图片？",success:function(t){t.confirm?(e.imageList=[],n(!0)):n(!1)},fail:function(){n(!1)}})})},previewImage:function(e){var n=e.target.dataset.src;t.previewImage({current:n,urls:this.imageList})},touchStart:function(t){this.startX=t.mp.changedTouches[0].pageX},touchEnd:function(e){this.endX=e.mp.changedTouches[0].pageX,this.endX-this.startX>200&&t.navigateBack()}}};e.default=c}).call(this,n(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).default)},89:
/*!*********************************************************************************************************************************!*\
  !*** D:/Documents/HBuilderProjects/vueFirst/pages/publish/publish.vue?vue&type=style&index=0&id=8b3bba02&scoped=true&lang=css& ***!
  \*********************************************************************************************************************************/
/*! no static exports found */function(t,e,n){"use strict";n.r(e);var i=n(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./publish.vue?vue&type=style&index=0&id=8b3bba02&scoped=true&lang=css& */90),s=n.n(i);for(var u in i)"default"!==u&&function(t){n.d(e,t,function(){return i[t]})}(u);e.default=s.a},90:
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!D:/Documents/HBuilderProjects/vueFirst/pages/publish/publish.vue?vue&type=style&index=0&id=8b3bba02&scoped=true&lang=css& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,n){}},[[79,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/publish/publish.js.map